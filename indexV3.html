<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lab Terminal: mRNA Sequence</title>
    <style>
        :root {
            --cell: 40px;
            --mrna-color: #f39c12;
            --bg: #d1d1d1;
        }
        body { font-family: 'Courier New', monospace; background: var(--bg); display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .grid { display: grid; grid-template-columns: 100px repeat(12, var(--cell)) 100px; background: #bbb; gap: 1px; border: 2px solid #444; }
        .cell { width: var(--cell); height: var(--cell); background: white; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .cell input { width: 100%; height: 100%; border: none; text-align: center; font-size: 1.1rem; font-weight: bold; text-transform: uppercase; outline: none; background: transparent; }
        .mrna-row { background: #fff1dc; }
        .empty { background: transparent; }
        .hint { background: #eeeeee !important; color: #444; pointer-events: none; user-select: none; }
        .label { background: #eee; font-size: 0.8rem; border: none; }
        .end-cap { background: var(--mrna-color); font-size: 0.8rem; font-weight: bold; color: black; display: flex; align-items: center; justify-content: center; text-align: center; padding: 2px; }
        
        /* Success Animation */
        .solved .mrna-row { background: var(--mrna-color) !important; transition: background 0.8s ease; }
        .solved .mrna-row * { color: white !important; }
        
        .controls { margin-top: 20px; display: flex; gap: 20px; align-items: center; }
        #status { font-weight: bold; font-size: 1.2rem; color: #333; }
        .btn-reset { padding: 8px 16px; cursor: pointer; background: #444; color: white; border: none; border-radius: 4px; font-family: inherit; }
        .btn-reset:hover { background: #222; }
    </style>
</head>
<body>

<div class="grid" id="grid"></div>

<div class="controls">
    <div id="status">ANALYZING GENETIC SAMPLES...</div>
    <button class="btn-reset" onclick="resetPuzzle()">RESET TERMINAL</button>
</div>

<script>
    // LINE 45: THE KEY ANSWERS
    const WORDS = [
        "PHAGOCYTOSIS", "IMMUNOLOGY", "G", "CHLOROPLAST", 
        "TACHYCARDIA", "U", "HYPERGLYCEMIA", "A", 
        "MACROPHAGE", "PNEUMONIA", "A", "ANTIBODY"
    ];

    const MRNA_INDEX = 5; 
    const OFFSETS = [2, 3, 0, 0, 1, 0, 5, 0, 2, 3, 0, 0];

    const RAW_HINTS = [
        [0,0,'P'], [0,1,'H'], [0,1,'H'], [0,3,'G'], [0,4,'O'], [0,5,'C'], [0,6,'Y'], [0,7,'T'], [0,8,'O'], [0,9,'S'], [0,10,'I'], [0,11,'S'], // Phagocytosis
        [1,1,'I'], [1,6,'N'], [1,8,'L'], [1,10,'G'], // Immunology
        [3,6,'H'], [3,8,'O'], [3,10,'O'], // Chloroplast (matching your photo's specific gaps)
        [4,4,'T'], [4,7,'H'], [4,9,'C'], [4,10,'A'], [4,11,'R'], [4,15,'A'], [4,16,'T'], // Tachycardia
        [6,0,'H'], [6,1,'Y'], [6,2,'P'], [6,3,'E'], [6,4,'R'], [6,6,'L'], [6,7,'Y'], [6,8,'C'], [6,9,'E'], [6,10,'M'], [6,11,'I'], [6,12,'A'], // Hyperglycemia
        [8,3,'M'], [8,4,'A'], [8,6,'R'], [8,8,'P'], [8,12,'E'], // Macrophage
        [9,2,'P'], [9,3,'N'], [9,8,'N'], [9,10,'A'], // Pneumonia
        [11,6,'N'], [11,8,'I'], [11,10,'O'], [11,12,'Y'] // Antibody
    ];

    const grid = document.getElementById('grid');

    function buildGrid() {
        grid.innerHTML = "";
        // Header
        grid.innerHTML += `<div class="empty"></div>`;
        for(let i=1; i<=12; i++) grid.innerHTML += `<div class="cell label">${i}</div>`;
        grid.innerHTML += `<div class="empty"></div>`;

        for (let r = 0; r < 18; r++) {
            grid.innerHTML += (r === MRNA_INDEX) ? `<div class="end-cap">mRNA 5' end</div>` : `<div class="empty"></div>`;
            for (let c = 0; c < 12; c++) {
                const startRow = MRNA_INDEX - OFFSETS[c];
                const charPos = r - startRow;
                if (charPos >= 0 && charPos < WORDS[c].length) {
                    const isMrna = (r === MRNA_INDEX);
                    const hintFound = RAW_HINTS.find(h => h[0] === c && h[1] === charPos);
                    let cellClass = isMrna ? "cell mrna-row" : "cell";
                    if (hintFound) {
                        grid.innerHTML += `<div class="${cellClass} hint">${hintFound[2]}</div>`;
                    } else {
                        grid.innerHTML += `<div class="${cellClass}"><input type="text" maxlength="1" data-word="${c}" data-idx="${charPos}" oninput="checkPuzzle()"></div>`;
                    }
                } else {
                    grid.innerHTML += `<div class="empty"></div>`;
                }
            }
            grid.innerHTML += (r === MRNA_INDEX) ? `<div class="end-cap">mRNA 3' end</div>` : `<div class="empty"></div>`;
        }
    }

    function checkPuzzle() {
        const inputs = document.querySelectorAll('input');
        let isComplete = true;
        inputs.forEach(inp => {
            if (inp.value.toUpperCase() !== WORDS[inp.dataset.word][inp.dataset.idx]) isComplete = false;
        });

        if (isComplete) {
            document.body.classList.add('solved');
            document.getElementById('status').innerText = "SEQUENCE REVEALED: A U G C A U G A C U A A";
        }
    }

    function resetPuzzle() {
        if(confirm("Clear all inputs?")) {
            document.body.classList.remove('solved');
            document.getElementById('status').innerText = "ANALYZING GENETIC SAMPLES...";
            buildGrid();
        }
    }

    buildGrid();
</script>
</body>
</html>