<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lab Terminal - Sequence Analysis</title>
    <style>
        :root {
            --bg-color: #f4f4f4;
            --cell-size: 40px;
            --highlight: #ffb366; /* mRNA Orange */
            --correct-text: #2d5a27;
        }

        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 3px solid #333;
            width: 100%;
            max-width: 800px;
        }

        .grid-container {
            display: grid;
            grid-template-columns: 80px repeat(12, var(--cell-size)) 80px;
            gap: 2px;
            background-color: #ccc;
            padding: 10px;
            border: 2px solid #333;
        }

        .cell {
            width: var(--cell-size);
            height: var(--cell-size);
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            text-transform: uppercase;
        }

        .cell input {
            width: 100%;
            height: 100%;
            border: none;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            text-transform: uppercase;
            outline: none;
        }

        .cell input:focus { background-color: #eef; }

        .mrna-row { background-color: #ffe0b3; } /* Pre-reveal tint */
        
        .label-cell { 
            background-color: #eee; 
            font-size: 0.8rem; 
            display: flex; 
            flex-direction: column;
        }

        .end-cap {
            background-color: var(--highlight);
            font-size: 0.9rem;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Success States */
        .solved .mrna-row {
            background-color: var(--highlight) !important;
            animation: pulse 2s infinite;
        }

        .solved input { color: var(--correct-text); }

        @keyframes pulse {
            0% { box-shadow: 0 0 0px var(--highlight); }
            50% { box-shadow: 0 0 15px var(--highlight); }
            100% { box-shadow: 0 0 0px var(--highlight); }
        }

        .hint { background-color: #eee !important; color: #666; }

        #status {
            margin-top: 20px;
            font-weight: bold;
            color: #d9534f;
        }
    </style>
</head>
<body>

<div class="header">
    <h1>GENETIC SEQUENCE ANALYZER v1.0</h1>
    <p>Complete the biological sequences to reveal the mRNA strand.</p>
</div>

<div class="grid-container" id="grid">
    <div></div>
    <div class="cell label-cell">1</div><div class="cell label-cell">2</div><div class="cell label-cell">3</div>
    <div class="cell label-cell">4</div><div class="cell label-cell">5</div><div class="cell label-cell">6</div>
    <div class="cell label-cell">7</div><div class="cell label-cell">8</div><div class="cell label-cell">9</div>
    <div class="cell label-cell">10</div><div class="cell label-cell">11</div><div class="cell label-cell">12</div>
    <div></div>

    </div>

<div id="status">ANALYZING SEQUENCES...</div>

<script>
    const WORDS = [
        "PHAGOCYTOSIS", "IMMUNOLOGY", "G", "CHLOROPLAST", 
        "TACHYCARDIA", "U", "HYPERGLYCEMIA", "A", 
        "MACROPHAGE", "PNEUMONIA", "A", "ANTIBODY"
    ];

    // Position of the "Final Word" letter in each word (0-indexed)
    const MRNA_INDEX = [2, 3, 0, 0, 1, 0, 5, 0, 2, 3, 0, 0];
    
    // Hints based on your image (Row, Col, Letter)
    const HINTS = [
        {r:2, c:1, l:'I'}, {r:3, c:0, l:'P'}, {r:3, c:8, l:'M'}, {r:2, c:9, l:'P'},
        {r:4, c:0, l:'H'}, {r:4, c:4, l:'T'}, {r:4, c:8, l:'A'}, {r:6, c:0, l:'G'},
        {r:6, c:1, l:'N'}, {r:6, c:3, l:'H'}, {r:6, c:8, l:'R'}, {r:6, c:11, l:'N'}
        // ... more can be added here
    ];

    const grid = document.getElementById('grid');
    const rows = 15; // Max height needed
    const cols = 12;

    // Build the grid row by row
    for (let r = 0; r < rows; r++) {
        // Left End Cap
        if (r === 5) {
            grid.innerHTML += `<div class="end-cap">mRNA 5' end</div>`;
        } else {
            grid.innerHTML += `<div></div>`;
        }

        // Columns
        for (let c = 0; c < cols; c++) {
            const word = WORDS[c];
            const mrnaPos = MRNA_INDEX[c];
            const relativePos = r - (5 - mrnaPos); // Align based on mRNA row (index 5)

            if (relativePos >= 0 && relativePos < word.length) {
                const isMrnaCell = (r === 5);
                const letter = word[relativePos];
                const isHint = HINTS.find(h => h.r === r && h.c === c);
                
                let cellClass = isMrnaCell ? "cell mrna-row" : "cell";
                let inputHtml = "";

                if (isHint) {
                    inputHtml = `<input type="text" maxlength="1" value="${isHint.l}" class="hint" readonly>`;
                } else {
                    inputHtml = `<input type="text" maxlength="1" data-word="${c}" data-pos="${relativePos}">`;
                }

                grid.innerHTML += `<div class="${cellClass}">${inputHtml}</div>`;
            } else {
                grid.innerHTML += `<div style="background:transparent"></div>`;
            }
        }

        // Right End Cap
        if (r === 5) {
            grid.innerHTML += `<div class="end-cap">mRNA 3' end</div>`;
        } else {
            grid.innerHTML += `<div></div>`;
        }
    }

    // Validation Logic
    const inputs = document.querySelectorAll('input:not(.hint)');
    inputs.forEach(input => {
        input.addEventListener('input', checkPuzzle);
    });

    function checkPuzzle() {
        let allCorrect = true;
        
        // Check every cell that has an input
        const allCells = document.querySelectorAll('input');
        allCells.forEach(inp => {
            if (inp.classList.contains('hint')) return;
            
            const wordIdx = inp.getAttribute('data-word');
            const posIdx = inp.getAttribute('data-pos');
            if (inp.value.toUpperCase() !== WORDS[wordIdx][posIdx]) {
                allCorrect = false;
            }
        });

        if (allCorrect) {
            document.body.classList.add('solved');
            document.getElementById('status').innerHTML = "SEQUENCE VERIFIED: [ AUGC AUG ACU AA ]";
            document.getElementById('status').style.color = "green";
        }
    }
</script>

</body>
</html>